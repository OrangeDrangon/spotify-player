(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){e.exports={page:"App_page__14G2o",section:"App_section__1vvt6"}},11:function(e,t,n){e.exports={header:"Header_header__2kr8J",button:"Header_button__w7eHc"}},19:function(e,t,n){e.exports={container:"PlaylistList_container__2Wtta"}},20:function(e,t,n){e.exports=n.p+"static/media/close.84e833e5.svg"},21:function(e,t,n){e.exports={container:"Card_container__M67NJ"}},22:function(e,t,n){e.exports={backdrop:"Modal_backdrop__3VE3C"}},24:function(e,t,n){e.exports=n(46)},33:function(e,t,n){},4:function(e,t,n){e.exports={cover:"Playlist_cover__3U_7L",card:"Playlist_card__3OMCF",close:"Playlist_close__3n1DV",header:"Playlist_header__3XXLq",title:"Playlist_title__3Fedx",description:"Playlist_description__2WzFR",createdBy:"Playlist_createdBy__3_wWb",author:"Playlist_author__27M0k"}},46:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),o=n.n(c),s=n(3),i=(n(33),n(5)),u=n(18),l=n.n(u),p=n(10),d=n.n(p),m=0,f=1,_=n(11),b=n.n(_),h=function(e){var t=e.setSelected;return r.a.createElement("header",{className:b.a.header},r.a.createElement("button",{className:b.a.button,onClick:function(){return t(m)}},"Featured"),r.a.createElement("button",{className:b.a.button,onClick:function(){return t(f)}},"Personal"))},k=n(1),v=n.n(k),y=n(2);function w(e,t){return E.apply(this,arguments)}function E(){return(E=Object(y.a)(v.a.mark(function e(t,n){var a,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=14;break}return e.prev=1,e.next=4,fetch(t,{method:"GET",headers:[["Authorization","Bearer ".concat(n)]]});case 4:return a=e.sent,e.next=7,a.json();case 7:return r=e.sent,e.abrupt("return",(a.status,r));case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}},e,null,[[1,11]])}))).apply(this,arguments)}var g=n(19),j=n.n(g),O=n(4),x=n.n(O),C=n(20),N=n.n(C),P=n(21),S=n.n(P),B=function(e){var t=e.children,n=e.containerClass;return r.a.createElement("div",{className:"".concat(S.a.container," ").concat(n||"")},t)},F=n(22),T=n.n(F),M=function(e){var t=e.children,n=e.open,a=e.onBackdropClick;return r.a.createElement("div",{className:T.a.backdrop,onClick:function(e){e.target===e.currentTarget&&a()},style:n?{}:{display:"none"}},t)},W=Object(s.b)(function(e){return{token:e.token}})(function(e){var t,n=e.href,c=e.token,o=Object(a.useState)(null),s=Object(i.a)(o,2),u=s[0],l=s[1],p=Object(a.useState)(!1),d=Object(i.a)(p,2),m=d[0],f=d[1],_=Object(a.useCallback)(Object(y.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(n,c);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),[n,c]);return Object(a.useEffect)(function(){var e=!1;return Object(y.a)(v.a.mark(function t(){var n,a;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_();case 2:(n=t.sent)&&(n.status||(a=n,e||l(a)));case 4:case"end":return t.stop()}},t)}))(),function(){e=!0}},[_]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:x.a.cover,onClick:function(){return f(!0)},style:u?{backgroundImage:"url(".concat(u.images[0].url,")")}:{}}),r.a.createElement(M,{open:m,onBackdropClick:function(){return f(!1)}},r.a.createElement(B,{containerClass:x.a.card},r.a.createElement("img",{src:N.a,alt:"",className:x.a.close,onClick:function(){return f(!1)}}),u?r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:x.a.header},r.a.createElement("h1",{className:x.a.title},u.name),r.a.createElement("div",{className:x.a.createdBy},"Created by"," ",r.a.createElement("span",{className:x.a.author},u.owner.display_name)),r.a.createElement("div",{className:x.a.description},(t=u.description?u.description:"",(new DOMParser).parseFromString(t,"text/html").documentElement.textContent)))):"Loading...")))}),J=function(e){var t=e.getSimple,n=Object(a.useState)(null),c=Object(i.a)(n,2),o=c[0],s=c[1];return Object(a.useEffect)(function(){var e=!1;return Object(y.a)(v.a.mark(function n(){var a,r;return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t();case 2:(a=n.sent)&&(a.status||(r=a,e||s(r)));case 4:case"end":return n.stop()}},n)}))(),function(){e=!0}},[t]),r.a.createElement("div",{className:j.a.container},(o?o.items:[]).map(function(e){return r.a.createElement(W,{key:e.id,href:e.href})}))},L=Object(s.b)(function(e){return{token:e.token}})(function(e){var t=e.token,n=Object(a.useCallback)(Object(y.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("https://api.spotify.com/v1/me/playlists",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),[t]);return r.a.createElement(J,{getSimple:n})}),z=Object(s.b)(function(e){return{token:e.token}})(function(e){var t=e.token,n=Object(a.useCallback)(Object(y.a)(v.a.mark(function e(){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("https://api.spotify.com/v1/browse/featured-playlists",t);case 2:return n=e.sent,e.abrupt("return",n?n.status?n:n.playlists:null);case 4:case"end":return e.stop()}},e)})),[t]);return r.a.createElement(J,{getSimple:n})}),A=Object(s.b)(function(e){return{token:e.token}},function(e){return{setToken:function(t){return e({type:"setToken",payload:t})}}})(function(e){var t=e.token,n=e.setToken,c=Object(a.useState)(m),o=Object(i.a)(c,2),s=o[0],u=o[1];return Object(a.useEffect)(function(){var e=!1,a=null;if(!t){var r=l.a.parse(window.location.hash);if(r.access_token){var c=r;e||(n(c.access_token),a=setTimeout(function(){return n(null)},1e3*Number(c.expires_in))),window.location.hash=""}else window.location.assign(function(e){var t=e.client_id,n=e.redirect_uri,a=e.response_type,r=e.scopes,c=e.show_dialog,o=e.state;return"https://accounts.spotify.com/authorize?client_id=".concat(t,"&redirect_uri=").concat(encodeURIComponent(n),"&scope=").concat(r?r.join(" "):"","&response_type=").concat(a,"&state=").concat(o||"","&show_dialog=").concat(c||"false")}({client_id:"7ff4c2742b1d4e91b297c2ef6bf8d041",redirect_uri:"https://player.kmr.pw",response_type:"token",scopes:["streaming","user-read-birthdate","user-read-email","user-read-private","playlist-read-private"]}))}return function(){e=!0,a&&clearTimeout(a)}},[t,n]),r.a.createElement(r.a.Fragment,null,r.a.createElement(h,{setSelected:u}),r.a.createElement("div",{className:d.a.page},r.a.createElement("section",{className:d.a.section,style:s===m?{}:{display:"none"}},r.a.createElement(z,null)),r.a.createElement("section",{className:d.a.section,style:s===f?{}:{display:"none"}},r.a.createElement(L,null))))}),H=n(9),I=n(23),D={token:null},G=Object(H.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;return"setToken"===t.type?Object(I.a)({},e,{token:t.payload}):e});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(s.a,{store:G},r.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[24,1,2]]]);
//# sourceMappingURL=main.bd40b35c.chunk.js.map